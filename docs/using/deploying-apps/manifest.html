<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>アプリケーションのマニフェスト</title>

    <link href="../../../stylesheets/master.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="../../../stylesheets/style.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="../../../javascripts/all.js" type="text/javascript"></script>
    <link href='/images/favicon.ico' rel='shortcut icon'>
    <script type="text/javascript">
      $(document).ready(function(){
        $('a#search').click(function () {
          $('#organization_bar .navbar .nav>li a').css("padding","11px 20px 8px");
          $('#organization_bar .navbar .nav>li a#docs').css("padding","14px 20px");
          $('#organization_bar .navbar .nav>li a#search2').css("padding","11px 10px 8px");
          $('#search-on').show();
          $('#search-off').hide();
        });
        $('.cancel-x').click(function () {
          $('#organization_bar .navbar .nav>li a').css("padding","11px 63px 8px");
          $('#organization_bar .navbar .nav>li a#docs').css("padding","14px 20px");
          $('#organization_bar .navbar .nav>li a#search2, #organization_bar .navbar .nav>li a#search').css("padding","16px 20px 15px");
          $('#organization_bar .navbar .nav>li a#getinvolved').css("padding","11px 92px 8px");
          $('#organization_bar .navbar .nav>li#docs-off .docs-list-list a').css("padding","0");
          $('#search-on').hide();
          $('#search-off').show();
        });f
        $(".togglebutton").click(function () {
        var divname= this.value;
          $("#"+divname).show("slow").siblings().hide("slow");
        });
      });
    </script>

    <!--[if lt IE 9]>
    <style>
        #content .container-full {background:  #ebf0fa;}
        .call-to-contribute-box, .column-left, .column-middle, .column-right {background:#e3e8f2}
        #footer {background:#000;}
    </style>
    <![endif]-->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-22181585-1']);
      _gaq.push(['_setDomainName', 'cloudfoundry.com']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>

  <body class="docs docs_using docs_using_deploying-apps docs_using_deploying-apps_manifest">
    <img id="bg" src="/images/bg-plain-x.jpg">
    <div id='non_footer'>
      <div id='header'>
        <div class='container_wide'>
          <ul class='actions'>
            <li class='last'>
              <a href="http://www.cloudfoundry.com/contact">Contact Us</a>
            </li>
            <li>
              <a class='register_link' href='http://login.run.pivotal.io/login'>My Account</a>            
            </li>
          </ul>
        </div>
      </div>
      <div id='content'>
        <div class='logo-main'>
          <div class='logo'>
            <a href='http://www.cloudfoundry.com'>
            <img src='/images/logo-cloudfoundry.png'>
            </a>
            <a href='http://www.gopivotal.com' target="_blank">
            <img id="pivotal-logo" src='/images/logo-pivotal.png'>
            </a>
          </div>
          <div class='cta'>
            <a href='https://console.run.pivotal.io'>
            <img src='/images/signup_freetrial.png'>
            </a>
          </div>
        </div><!-- End of logo-main-->
        <div class='container-full'>
          <div id='organization_bar'>
            <div class='navbar'>
              <ul class='nav'>
                <li>
                <a href='http://www.cloudfoundry.com/use' id='use'>Using Cloud Foundry</a>
                </li>
                <li>
                <a href='http://www.cloudfoundry.com/run' id='run'>Running Cloud Foundry</a>
                </li>
                <li>
                <a href='http://www.cloudfoundry.com/getinvolved' id='getinvolved'>Get Involved</a>
                </li>
                <li id='docs-off'>
                  <a href='/' id='docs'>
                    <div id='icon-docs'></div>
                  </a>
                  <div id='docs-list'>
                    <div class="docs-list-list">
                      <a class="docs-list-th" href='/docs/using/app-arch/'>Using Cloud Foundry</a>
                      <br>
                      <a href="/docs/using/app-arch/">Application Architecture Considerations</a>
                      <br>
                      <a href='/docs/using/deploying-apps/'>Deploying Apps</a>
                      <br>
                      <a href='/docs/using/managing-apps/'>Managing Apps</a>
                      <br>
                      <a href='/docs/using/services.html'>Using Services</a>
                      <br>
                      <a class="docs-list-see-all" href="/docs/using/">See all</a>
                    </div><!-- End of 1st column docs-list-list-->
                    <div class="hr-vertical"></div>
                    <div class="docs-list-list">
                      <a class="docs-list-th" href='/docs/running/'>Running Cloud Foundry</a>
                      <br>
                      <a href='/docs/running/architecture/'>Architecture</a>
                      <br>
                      <a href='/docs/running/bosh/'>BOSH</a>
                      <br>
                      <a href='/docs/running/deploying-cf/'>Deploying with BOSH</a>
                      <br>
                      <a href='/docs/running/deploying-cf-with-chef/'>Deploying with Chef</a>
                      <br>
                      <a href='/docs/running/micro_cloud_foundry/'>Micro Cloud Foundry</a>
                      <br>
                      <a href='/docs/running/managing-cf/index.html'>Managing Cloud Foundry</a>
                      <br>
                      <a class="docs-list-see-all" href="/docs/running/">See all</a>
                    </div><!-- End of column 2 docs-list-list -->
                    <div class="hr-vertical"></div>
                    <div class="docs-list-list">
                      <a class="docs-list-th" href='/docs/reference/'>Reference</a>
                      <br>
                      <a href='/docs/reference/cc-api.html'>Cloud Foundry REST API</a>
                      <br>
                      <a class="docs-list-th" href='/docs/dotcom/'>CloudFoundry.com</a>
                      <br>
                      <a href='/docs/dotcom/integration/'>Technical Integration</a>
                      <br>
                      <a class="docs-list-th" href='/docs/community/'>Community</a>
                    </div><!-- End of column 3 docs-list-list -->
                  </div><!-- End of docs-list -->
                </li>
                <li id='search-off'>
                  <a id='search'>
                    <div class='icon-search'></div>
                  </a>
                </li>
                <li id='search-on'>
                  <a id='search2'>
                    <form action='http://www.cloudfoundry.com/search' class='search-form' method='get' onsubmit='return submitQuery()'>
                      <input autocomplete='off' class='search-input' id='search-query' name='q' onfocus="this.placeholder = ''" placeholder='' type='search' value=''>
                    </form>
                    <div class="cancel-x"></div>
                  </a>
                </li>
              </ul>
            </div><!-- End of navbar -->
          </div><!-- End of organization_bar -->
          <div class='content_inner'>
            <a class="forkme" href="http://github.com/cloudfoundry/cf-docs" target="_blank">
              <img alt="Fork me on GitHub" src="/images/ribbon_forkme.png">
            </a>
            <form action='http://www.cloudfoundry.com/search' class='search-docs-form' method='get' onsubmit='return submitQuery()'>
              <input autocomplete='off' class='search-docs-input' id='search-query' name='q' onfocus="this.placeholder = 'more:docs '" placeholder='' type='search-docs' value='more:docs '>
            </form>
            <br clear="left">
            
              <div class="breadcrumbs">
                <ul>
                  <li>
                    <a href="/">Home</a>
                  </li>
                  <li class=""><a href="../">Cloud Foundryを使用する</a></li> <li class=""><a href="./">アプリケーションのデプロイについての重要事項</a></li> <li class="active"><span>アプリケーションのマニフェスト</span></li>
                </ul>
              </div>
              <br clear="left">

			

              <div class="quick-links"><ul>
<li><a href="#purpose">マニフェスト・ファイルの目的</a></li>
<li><a href="#sample">マニフェストの簡単な例</a></li>
<li><a href="#push-and-manifest">cfのプッシュとマニフェスト</a></li>
<li><a href="#create">マニフェストの作り方</a></li>
<li><a href="#manual">マニフェスト内の必須項目</a></li>
<li><a href="#specify-service">マニフェストでのサービスの指定</a></li>
<li><a href="#var">マニフェスト内での環境変数</a></li>
<li><a href="#symbols">マニフェスト内でのシンボル</a></li>
<li><a href="#inheritance">複数のマニフェストと継承</a></li>
<li><a href="#multi-app">依存関係のある複数のアプリの定義</a></li>
<li><a href="#not-simple">あまり簡単ではないマニフェストの例</a></li>
<li><a href="#attributes">サポートされるアトリビュート</a></li>
</ul>
</div>

              <h1>アプリケーションのマニフェスト</h1>

            
            <p>マニフェストはアプリケーションのデプロイの設定を定義します。例として、アプリケーションの名前、インスタンスの数、一つのインスタンスが使えるメモリ量の上限、使用するサービスなどが挙げられます。マニフェストの名前のデフォルトは<code>manifest.yml</code>です。</p>

<h2><a id='purpose'></a>マニフェスト・ファイルの目的</h2>

<p>マニフェストの目的は、アプリケーションのデプロイを自動化することです - デプロイの設定をファイルに書くことができ、コマンド・ラインで指定しなくて済みます。cf pushコマンドで指定できるオプションは、すべてマニフェストで定義できます。
cf pushコマンドが入力を求めないような設定はマニフェストにのみ書くことができます。   </p>

<h2><a id='sample'></a>マニフェストの簡単な例</h2>

<p>以下のマニフェストの例は、&quot;nodetestdh01&quot;という名前のNode.jsアプリケーションのデプロイの設定を定義しています。
このマニフェストを使ってアプリケーションをプッシュすると、二つのインスタンスが作られます。
アプリケーションのURLは<code>crn.csapps.io</code>になります。</p>
<div class="highlight"><pre><span class="n">applications</span><span class="p">:</span>
<span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">nodetestdh01</span>
  <span class="n">memory</span><span class="p">:</span> <span class="mi">64</span><span class="n">M</span>
  <span class="n">instances</span><span class="p">:</span> <span class="mi">2</span>
  <span class="n">host</span><span class="p">:</span> <span class="n">crn</span>
  <span class="n">domain</span><span class="p">:</span> <span class="n">csapps</span><span class="p">.</span><span class="n">io</span>
  <span class="n">path</span><span class="p">:</span> <span class="p">.</span>
</pre></div>
<p>マニフェストはYAML形式で記述されます。YAMLについては、www.yaml.orgをご参照ください。</p>

<h2><a id='push-and-manifest'></a>cfのプッシュとマニフェスト</h2>

<p>アプリケーションがプッシュされた時、cfはmanifest.ymlというファイルを探します。
プッシュ・コマンドはカレント・ディレクトリ内でマニフェストを見つけようとします。見つからなければ、アプリケーションのルート上のディレクトリ内を探します。
マニフェストのファイル名が<code>manifest.yml</code>でなければ、<code>--manifest</code> (<code>-m)</code>オプションでファイル名を指定します。以下がその例です:</p>

<pre class="terminal">
cf push -m prod-manifest.yml
</pre>

<p>注意:cfコマンドは以下の場合はマニフェストを探しません:</p>

<ul>
<li><code>cf push</code>コマンドで<code>--interactive</code>オプションを使った場合、cfコマンドはマニフェストを探さず、デプロイの設定の入力を求めます。</li>
<li><code>cf push</code>コマンドの<code>--no-manifest</code>オプションを使った場合、マニフェストが存在しても無視されます。</li>
</ul>

<p>初めてあるアプリケーションをプッシュする場合、マニフェストが存在すればcfコマンドはその内容をデプロイの設定として使用します。</p>

<p>マニフェストが<em>見つけられない</em>場合、cfコマンドは必要なデプロイの設定の入力を求めます。
以下のセクションで記述するように、必要な項目が入力されると、cfコマンドはマニフェストとして保存するかたずねます。</p>

<p>あるアプリケーションの<em>2回目以降</em>のデプロイでは、cf pushコマンドはマニフェスト内の設定を反映しません。
その代わりに、直近の設定を使用します。
例えば、マニフェスト内でinstances: 1”と指定されていて、プッシュ後にcf scaleコマンドでインスタンス数を2にした場合、次にアプリケーションをプッシュするとインスタンス数は2になります。
マニフェスト内の設定を反映させるには、<code>--reset</code>オプションを使う必要があります。</p>

<h2><a id='create'></a>マニフェストの作り方</h2>

<p>マニフェストを作る方法は二通りあります:</p>

<ul>
<li><p>自動で作成 &ndash; あるアプリケーションを初めてプッシュする時(マニフェストがないとして)、自動的に作成できます。コマンドのオプションか対話型の入力で指定します。
<code>cf</code>コマンドが設定をマニフェストとして保存するか聞いてきます。
“yes”と答えると、アプリケーションのルート・ディレクトリにmanifest.ymlというファイル名で設定が保存されます。</p></li>
<li><p>手動で作成 &ndash; テキスト・ファイルに設定を書き込んで作成できます。
マニフェストをプロジェクトのルート・ディレクトリまたはルートの一つ上のディレクトリに置きます。</p></li>
</ul>

<h2><a id='manual'></a>マニフェスト内の必須項目</h2>

<p>いくつかの設定項目はマニフェストでのみ指定できます。
例:</p>

<ul>
<li><p>Rubyのシンボル – Rubyのシンボルを使いたい場合、マニフェスト内で定義する必要があります。
<a href="#symbols">マニフェスト内でのシンボル</a>をご参照ください。</p></li>
<li><p>環境変数 – 環境変数を使いたいなら、マニフェスト内で定義する必要があります。
<a href="#vars">マニフェスト内での環境変数</a>をご参照ください</p></li>
<li><p>複数のアプリケーション向けのマニフェスト – 一回のプッシュ・コマンドで複数のアプリケーションをデプロイしたい場合、マニフェスト・ファイルを編集して個々のアプリケーションの設定を定義する必要があります。
複数のアプリケーション向けのマニフェストでは、アプリケーションの依存関係を定義することができます。
<a href="#multi-app">依存関係のある複数のアプリケーションのマニフェスト</a>をご覧ください。</p></li>
<li><p>継承 – マニフェストの継承に記述されているように、あるマニフェストの内容を別のマニフェストに含めたい場合、マニフェスト内で<a href="#inheritance">Multiple Manifests and Inheritance</a>のように定義する必要があります。</p></li>
<li><p>アプリケーション・スタック — アプリケーション・スタックを定義したい場合、<code>stack</code>属性を書き加える必要があります。</p></li>
</ul>

<h2><a id='specify-service'></a>マニフェストでのサービスの指定</h2>

<p>アプリケーションのデプロイ時にサービスのインスタンスを作成してバインドしたい場合、以下のような行をマニフェスト内に書き加える必要があります:</p>

<p><tt>
services:<br>
&nbsp;&nbsp;&nbsp;<i>service-instance-name:</i><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type: <i>service-type</i><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;provider: <i>service-provider</i><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plan: <i>service-plan</i><br>
</tt></p>

<p>以下の例では二つのサービスを定義しています。</p>
<div class="highlight"><pre><span class="n">applications</span><span class="p">:</span>
<span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">mysample</span>
  <span class="n">memory</span><span class="p">:</span> <span class="mi">256</span><span class="n">M</span>
  <span class="n">instances</span><span class="p">:</span> <span class="mi">1</span>
  <span class="n">host</span><span class="p">:</span> <span class="n">tapp</span>
  <span class="n">domain</span><span class="p">:</span> <span class="n">ctapps</span><span class="p">.</span><span class="n">io</span>
  <span class="n">path</span><span class="p">:</span> <span class="p">.</span>
  <span class="n">services</span><span class="p">:</span>
    <span class="n">rediscloud</span><span class="o">-</span><span class="mi">8</span><span class="n">cccc</span><span class="p">:</span>
      <span class="n">type</span><span class="p">:</span> <span class="n">rediscloud</span>
      <span class="n">provider</span><span class="p">:</span> <span class="n">garantiadata</span>
      <span class="n">plan</span><span class="p">:</span> <span class="mi">20</span><span class="n">mb</span>
    <span class="n">mongolab</span><span class="o">-</span><span class="mi">6</span><span class="n">d208</span><span class="p">:</span>
      <span class="n">type</span><span class="p">:</span> <span class="n">mongolab</span>
      <span class="n">provider</span><span class="p">:</span> <span class="n">mongolab</span>
      <span class="n">plan</span><span class="p">:</span> <span class="n">sandbox</span>
</pre></div>
<h2><a id='var'></a>マニフェスト内での環境変数</h2>

<p>環境変数を定義するには、以下のような行をマニフェストへ書き加える必要があります:</p>

<p><tt>
env:<br>
&nbsp;&nbsp;&nbsp;<i>var<em>name: var</em>value</i><br>
</tt></p>

<p>例:</p>

<p><tt>
env:<br>
&nbsp;&nbsp;&nbsp;greeting: hello<br>
</tt></p>

<p>マニフェストの<a href="#not-simple">あまり簡単ではない例</a>の“base-manifest”を参照してください。</p>

<h2><a id='symbols'></a>マニフェスト内でのシンボル</h2>

<p><code>manifest.yml</code>は以下のシンボルをサポートしています。(シンボルとはRubyのオブジェクトで、オブジェクトの名前は後で解決されます)</p>

<ul>
<li><p><code>target-base</code> – あなたのターゲットのURLのベースです。
例えば、“api.mycloud.com”がターゲットだとして、“mycloud.com”がベースとなります。
複数のCloud Foundryへプッシュされるアプリケーションのマニフェストにとって<code>target-base</code>は有用です。</p></li>
<li><p><code>random-word</code> &ndash; URLがユニークであることを保証するためのランダムな文字列です。</p></li>
</ul>

<p>あるいは、シンボルの解決は語句のスコープをシミュレートします &mdash; 属性を定義し、子マニフェストで上書きするか、ネストしたハッシュで解決することができます。 (<a href="#multi-app">上の複数のマニフェストの継承でも説明されています</a>)</p>

<h2><a id='inheritance'></a>複数のマニフェストと継承</h2>

<p>マニフェストは以下の行で親から設定を継承することができます:</p>
<div class="highlight"><pre><span class="n">inherit</span><span class="o">:</span> <span class="n">path</span><span class="sr">/to/</span><span class="n">parent</span><span class="o">.</span><span class="na">yml</span>
</pre></div>
<p>これにより、親マニフェストの内容が子マニフェストへ引きつがれ、設定がマージされます。
シンボル(上のマニフェスト内でのシンボルで言及されている)はマージの後に解決され、子マニフェストで定義された属性は親マニフェストの属性の集合の中でのみ使うことができます。
これにより、サービスのバインド情報のような基本的な情報を元となるマニフェストで定義し、子マニフェストで拡張することが可能になります。
例:</p>

<ul>
<li><p>種々のデプロイのために複数の子マニフェストを作り、それぞれ元になるマニフェストを拡張することができます。(例えば、debug、local、publicなど)</p></li>
<li><p>元になるマニフェストを用意し、利用者が子マニフェストで設定を追加したり上書きすることができます。</p></li>
</ul>

<h2><a id='multi-app'></a>依存関係のある複数のアプリの定義</h2>

<p>マニフェストにより、一回のプッシュ・コマンドで複数のアプリケーションをデプロイすることができます。
例えば、独立してはいるが関連があるアプリケーション、発行者と購読者を考えてみましょう。
購読者は発行者の前に起動すべきです。これにより、発行者がメッセージを送信しだい、それを受信することができます。
この二つのアプリケーションを同じプロジェクトで定義すれば、複数のアプリケーション向けのマニフェストを作り、その中で依存関係を記述することができます。
例えば、以下のように書けます:</p>
<div class="highlight"><pre><span class="o">./</span><span class="n">big</span><span class="o">-</span><span class="n">app</span>
<span class="o">./</span><span class="n">big</span><span class="o">-</span><span class="n">app</span><span class="o">/</span><span class="n">publisher</span>
<span class="o">./</span><span class="n">big</span><span class="o">-</span><span class="n">app</span><span class="o">/</span><span class="n">subscriber</span>
</pre></div>
<p>以下のマニフェストは一つのRedisサービスを使用する二つのアプリケーション“publisher”と“subscriber”を定義しています。
“publisher”アプリケーションは“subscriber”アプリケーションに依存しているので、<code>cf push</code>を&quot;big-app&quot;ディレクトリで実行すると、“subscriber”は“publisher”より先に起動します。</p>
<div class="highlight"><pre><span class="n">pplications</span><span class="p">:</span>
<span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">publisher</span>
  <span class="n">memory</span><span class="p">:</span> <span class="mi">64</span><span class="n">M</span>
  <span class="n">path</span><span class="p">:</span> <span class="o">./</span><span class="n">publisher</span>
  <span class="n">domain</span><span class="p">:</span> <span class="n">cfapps</span><span class="p">.</span><span class="n">io</span>
  <span class="n">host</span><span class="p">:</span> <span class="n">publisher</span>
  <span class="n">instances</span><span class="p">:</span> <span class="mi">1</span>
  <span class="n">services</span><span class="p">:</span>
    <span class="n">work</span><span class="o">-</span><span class="n">queue</span><span class="p">:</span>
      <span class="n">type</span><span class="p">:</span> <span class="n">rediscloud</span>
      <span class="n">provider</span><span class="p">:</span> <span class="n">garantiadata</span>
      <span class="n">plan</span><span class="p">:</span> <span class="mi">20</span><span class="n">mb</span>
  <span class="n">depends</span><span class="o">-</span><span class="n">on</span><span class="p">:</span> <span class="o">./</span><span class="n">subscriber</span>
<span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">subscriber</span>
  <span class="n">memory</span><span class="p">:</span> <span class="mi">64</span><span class="n">M</span>
  <span class="n">path</span><span class="p">:</span> <span class="o">./</span><span class="n">subscriber</span>
  <span class="n">domain</span><span class="p">:</span> <span class="n">cfapps</span><span class="p">.</span><span class="n">io</span>
  <span class="n">host</span><span class="p">:</span> <span class="n">subscriber</span>
  <span class="n">instances</span><span class="p">:</span> <span class="mi">1</span>
  <span class="n">services</span><span class="p">:</span>
    <span class="n">work</span><span class="o">-</span><span class="n">queue</span><span class="p">:</span>
      <span class="n">type</span><span class="p">:</span> <span class="n">rediscloud</span>
      <span class="n">provider</span><span class="p">:</span> <span class="n">garantiadata</span>
      <span class="n">plan</span><span class="p">:</span> <span class="mi">20</span><span class="n">mb</span>
</pre></div>
<h2><a id='not-simple'></a>あまり簡単ではないマニフェストの例</h2>

<p>このセクションはマニフェストのいろいろな機能を示す二つのマニフェストを含んでいます。</p>

<p><strong>Notes:</strong></p>

<ul>
<li><p>最初の行は三つのダッシュ(&mdash;)からなります。</p></li>
<li><p>すべてのアプリケーションに共通の設定は、最初のアプリケーションのブロックの前に書きます。
環境変数やサービスなどのアプリケーション共通の設定の例は“base-manifest.yml”に示されています。</p></li>
<li><p>どちらのマニフェストも複数のアプリケーション向けのマニフェストの例です。</p></li>
<li><p>最初のアプリケーションごとの設定nameの前にダッシュ(“-”)を書きます。</p></li>
<li><p>“production-manifest.yml”は“base-manifest.yml”の設定を受けついでいます;
“base-manifest.yml”内のすべての設定が“production-manifest.yml”内で定義されたアプリケーションそれぞれに適用されます。
例えば、“base-manifest.yml”内で定義された環境変数は、“production-manifest.yml”内で定義されたすべてのアプリケーションで有効です。</p></li>
<li><p>“#”ではじまる行はコメントです。</p></li>
</ul>

<h3>production-manifest.yml</h3>
<div class="highlight"><pre>---
inherit: base-manifest.yml

properties:
  rails-env: production
  app-host: app1-host

applications:
  - name: app1-web
    host: <span class="cp">${</span><span class="n">app</span><span class="o">-</span><span class="n">host</span><span class="cp">}</span>
    domain: <span class="cp">${</span><span class="n">target</span><span class="o">-</span><span class="n">base</span><span class="cp">}</span>
    instances: 8
    command: bundle exec rake server:start_command
  - name: app1-worker1
    instances: 4
    command: bundle exec rake VERBOSE=true QUEUE=*
  - name: app1-worker2
    command: bundle exec rake VERBOSE=true
</pre></div>
<h3>base-manifest.yml</h3>
<div class="highlight"><pre>---
properties:
  app-host: <span class="cp">${</span><span class="n">name</span><span class="cp">}</span>

path: .
env:
  RAILS_ENV: <span class="cp">${</span><span class="n">rails</span><span class="o">-</span><span class="n">env</span><span class="cp">}</span>
  RACK_ENV: <span class="cp">${</span><span class="n">rails</span><span class="o">-</span><span class="n">env</span><span class="cp">}</span>
  BUNDLE_WITHOUT: test:development
services:
  frontend-db:
    type: cleardb
    provider: cleardb
    plan: shock
mem: 512M
disk: 1G
instances: 1
host: none
domain: none

# app-specific configuration
applications:
- name: frontend
  host: <span class="cp">${</span><span class="n">app</span><span class="o">-</span><span class="n">host</span><span class="cp">}</span>
  domain: <span class="cp">${</span><span class="n">target</span><span class="o">-</span><span class="n">base</span><span class="cp">}</span>
  instances: 2
  command: bundle exec rake server:start_command
- name: app2-worker1
  instances: 2
  command: bundle exec rake VERBOSE=true QUEUE=* 
- name: app2-worker2
  command: bundle exec rake VERBOSE=true 
</pre></div>
<h2><a id='attributes'></a>サポートされるアトリビュート</h2>

<table><thead>
<tr>
<th>アトリビュート</th>
<th>説明</th>
<th>必須?</th>
<th>例</th>
</tr>
</thead><tbody>
<tr>
<td>inherit</td>
<td>他のマニフェストを使う場合、そのマニフェストを指定します</td>
<td>n</td>
<td>inherit: base-manifest.yml</td>
</tr>
<tr>
<td>properties</td>
<td>プロパティと値のペアを指定します</td>
<td>n</td>
<td>properties: <br>&nbsp;&nbsp;app-host: ${name}</td>
</tr>
<tr>
<td>env</td>
<td>アプリケーションが使う環境変数を指定します</td>
<td>n</td>
<td>env:  <br>&nbsp;&nbsp;RAILS_ENV: ${rails-env}</td>
</tr>
<tr>
<td>name</td>
<td>アプリケーションの名</td>
<td>y</td>
<td><a href="#not-simple">単純ではないマニフェストの例</a>の例をご覧ください。</td>
</tr>
<tr>
<td>buildpack</td>
<td>外部または独自のビルドパックのURLを指定します</td>
<td>n</td>
<td></td>
</tr>
<tr>
<td>command</td>
<td>アプリケーションを起動するコマンド</td>
<td>n</td>
<td>command: bundle exec rake server:start_command</td>
</tr>
<tr>
<td>domain</td>
<td>アプリケーションのドメイン</td>
<td></td>
<td></td>
</tr>
<tr>
<td>host</td>
<td>アプリケーションのホスト</td>
<td></td>
<td></td>
</tr>
<tr>
<td>instances</td>
<td>アプリケーションのインスタンスの数。 <br><br>関連する情報について、<a href="./">Key Facts About Application Deployment</a>の <a href="./#instances">Run Multiple Instances to Increase Availability</a>をご覧ください。</td>
<td>y, defaults to 1<br> 指定されない場合</td>
<td>instances: 2</td>
</tr>
<tr>
<td>mem</td>
<td>アプリケーションが使えるメモリ量の上限</td>
<td>y, defaults to 256M<br> 指定されない場合</td>
<td>mem: 64M</td>
</tr>
<tr>
<td>disk</td>
<td>アプリケーションが使えるディスク容量の上限</td>
<td></td>
<td>disk:1G</td>
</tr>
<tr>
<td>path</td>
<td>ワーキング・ディレクトリからプッシュするアプリケーションへの相対パス</td>
<td>y</td>
<td>path: .</td>
</tr>
<tr>
<td>stack</td>
<td></td>
<td>n</td>
<td></td>
</tr>
<tr>
<td>depends-on</td>
<td>カレント・ディレクトリから依存する別アプリケーションへの相対パス</td>
<td>n</td>
<td></td>
</tr>
<tr>
<td><em>Service_Name</em></td>
<td>作成されアプリケーションへバインドされるサービスのインスタンスの名前</td>
<td>y</td>
<td>&ldquo;base-manifest.xml&quot;の例をご覧ください</td>
</tr>
<tr>
<td>type</td>
<td>サービスのタイプ</td>
<td>y</td>
<td>&quot;base-manifest.xml&quot;の例をご覧ください</td>
</tr>
<tr>
<td>provider</td>
<td>サービスのプロヴァイダー</td>
<td>y</td>
<td>&quot;base-manifest.xml&quot;の例をご覧ください</td>
</tr>
<tr>
<td>plan</td>
<td>サービスの属するプラン</td>
<td>y</td>
<td>&quot;base-manifest.xml&quot;の例をご覧ください</td>
</tr>
</tbody></table>

          </div><!-- End of content_inner -->
        </div><!-- End of container-full -->
      </div><!-- End of content -->
    </div><!-- End of non_footer -->
    <div id='footer'>
      <div id='container-footer'>
        <div class='bg_social'>
          <ul class='social'>
            <li>
            <a href='http://twitter.com/cloudfoundry' target='_blank'>
            <img alt='Twitter' src='/images/twitter_large.png'>
            </a>
            </li>
            <li>
            <a href='https://plus.google.com/114245065906861739918/posts' target='_blank'>
            <img alt='Google+' src='/images/g+_large.png'>
            </a>
            </li>
            <li>
            <a href='http://facebook.com/cloudfoundry' target='_blank'>
            <img alt='Facebook' src='/images/facebook_large.png'>
            </a>
            </li>
            <li>
            <a href='http://youtube.com/cloudfoundry' target='_blank'>
            <img alt='Youtube' src='/images/youtube_large.png'>
            </a>
            </li>
          </ul>
        </div><!-- End of bg_social -->
        <ul class='links'>
          <li>
          <a href='http://www.cloudfoundry.com/about'>About</a>
          </li>
          <li class='disc'>•</li>
          <li>
          <a href='http://blog.cloudfoundry.com/'>Blog</a>
          </li>
          <li class='disc'>•</li>
          <li>
          <a href='http://www.cloudfoundry.com/partners'>Partners</a>
          </li>
          <li class='disc'>•</li>
          <li>
          <a href='http://docs.cloudfoundry.com'>Docs</a>
          </li>
          <li class='disc'>•</li>
          <li>
          <a href='http://www.cloudfoundry.com/faq'>FAQ</a>
          </li>
          <li class='disc'>•</li>
          <li>
          <a href='http://www.cloudfoundry.com/getinvolved'>Get Involved</a>
          </li>
          <li class='disc'>•</li>
          <li>
          <a href='http://status.cloudfoundry.com/'>Status</a>
          </li>
          <li class='disc'>•</li>
          <li>
          <a href='http://www.cloudfoundry.com/support'>Support</a>
          </li>
        </ul>
        <div class='copyright'>
          <div class='hr-horizontal-dark'></div>
          <br>
          <p>
            &copy;
            <script>
              //<![CDATA[
                var d = new Date();
                document.write(d.getFullYear());
              //]]>
            </script>
            GoPivotal, Inc. All rights reserved.
            <a href='http://www.cloudfoundry.com/terms'>Terms</a>
            <a href='http://www.gopivotal.com/privacy-policy' target='_blank'>Privacy</a>
          </p>
        </div><!-- End of copyright -->
      </div><!-- End of container-footer -->
    </div><!-- End of footer -->
    <script type="text/javascript">
      (function() {
        var didInit = false;
        function initMunchkin() {
          if(didInit === false) {
            didInit = true;
            Munchkin.init('625-IUJ-009');
          }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
          if (this.readyState == 'complete' || this.readyState == 'loaded') {
            initMunchkin();
          }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
      })();
    </script>
  </body>
</html>
